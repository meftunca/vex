// Test user-defined contract implementation
// Phase 1: struct Point impl Add

contract Add {
     op+(other: Self): Self;
}

struct Point impl Add {
    x: i32,
    y: i32,
    
    fn op+(other: Point): Point {
        return Point {
            x: self.x + other.x,
            y: self.y + other.y,
        };
    }
}

fn point_new(x: i32, y: i32): Point {
    return Point { x: x, y: y };
}

fn main(): i32 {
    let p1 = point_new(10, 20);
    let p2 = point_new(5, 15);
    
    // Should desugar to: p1.add(p2)
    let p3 = p1 + p2;
    
    if p3.x == 15 {
        if p3.y == 35 {
            return 0; // Success
        }
    }
    
    return 1; // Fail
}
