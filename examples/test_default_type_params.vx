// Test default type parameters
// Purpose: Verify parser accepts T = DefaultType syntax

contract Add<Rhs = Self> {
    op+(other: Rhs): Self;
}

contract Mul<Rhs = Self> {
    op*(other: Rhs): Self;
}

struct Point impl Add, Mul {
    x: i32,
    y: i32,

    // Add<Self> - Rhs defaults to Point
    fn (self: &Point!) op+(other: Point): Point {
        return Point { 
            x: self.x + other.x, 
            y: self.y + other.y 
        };
    }

    // Mul<Self> - Rhs defaults to Point
    fn (self: &Point!) op*(other: Point): Point {
        return Point { 
            x: self.x * other.x, 
            y: self.y * other.y 
        };
    }
}

fn main(): i32 {
    let p1 = Point { x: 10, y: 20 };
    let p2 = Point { x: 2, y: 3 };
    
    // Test Add<Self> (default)
    let p3 = p1 + p2;
    
    // Verify result: (10+2, 20+3) = (12, 23)
    if p3.x == 12 {
        if p3.y == 23 {
            return 0;  // Success
        }
    }
    
    return 1;  // Failure
}
