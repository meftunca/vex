// Test Ord contract - Ordering comparison
// Test custom ordering with .compare()

import { Ord } from "core";

struct Version impl Ord {
    major: i32,
    minor: i32,
    
    fn compare(other: Version): i32 {
        // Compare major first
        if self.major < other.major {
            return -1;
        }
        if self.major > other.major {
            return 1;
        }
        
        // Major equal, compare minor
        if self.minor < other.minor {
            return -1;
        }
        if self.minor > other.minor {
            return 1;
        }
        
        return 0;  // Equal
    }
}

fn main(): i32 {
    let v1 = Version { major: 1, minor: 0 };
    let v2 = Version { major: 2, minor: 0 };
    let v3 = Version { major: 1, minor: 5 };
    let v4 = Version { major: 1, minor: 0 };
    
    // v1 < v2 (major difference)
    if v1.compare(v2) != -1 {
        println("❌ FAILED: v1 should be less than v2");
        return 1;
    }
    
    // v1 < v3 (minor difference)
    if v1.compare(v3) != -1 {
        println("❌ FAILED: v1 should be less than v3");
        return 1;
    }
    
    // v1 == v4
    if v1.compare(v4) != 0 {
        println("❌ FAILED: v1 should equal v4");
        return 1;
    }
    
    // v2 > v1
    if v2.compare(v1) != 1 {
        println("❌ FAILED: v2 should be greater than v1");
        return 1;
    }
    
    println("✅ PASSED: Ord contract works correctly");
    return 0;
}

// Expected output:
// ✅ PASSED: Ord contract works correctly
