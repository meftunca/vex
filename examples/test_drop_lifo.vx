// Test Drop trait - LIFO (Last In First Out) order
// Resources should be dropped in reverse order of creation

import { Drop } from "core";

extern "C" {
    fn vex_i32_to_string(value: i32): str;
}

struct Resource impl Drop {
    id: i32,
    
    fn drop() {
        print("Dropping resource ");
        print(vex_i32_to_string(self.id));
        println("");
    }
}

fn test_lifo() {
    let r1 = Resource { id: 1 };
    let r2 = Resource { id: 2 };
    let r3 = Resource { id: 3 };
    // Should drop in reverse order: 3, 2, 1
}

fn main(): i32 {
    println("Testing LIFO order:");
    test_lifo();
    println("Done");
    return 0;
}

// Expected output:
// Testing LIFO order:
// Dropping resource 3
// Dropping resource 2
// Dropping resource 1
// Done
