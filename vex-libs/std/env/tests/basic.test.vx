// Environment Module Tests
// Tests for environment variable operations

import { get, set, unset } from "env";

fn test_basic_env_operations(): i32 {
    // Test set and get
    let test_key = "VEX_TEST_VAR";
    let test_value = "test_value_123";
    
    // Set environment variable
    let set_ok = set(test_key, test_value);
    if !set_ok {
        return 1; // Set failed
    }
    
    // Get value
    let retrieved = get("VEX_TEST_VAR");
    // TODO: String comparison when available
    
    // Unset
    let unset_ok = unset("VEX_TEST_VAR");
    if !unset_ok {
        return 4; // Unset failed
    }
    
    return 0; // Success
}

fn test_system_env_vars(): i32 {
    // Test that we can get system environment variables
    
    // PATH should exist
    let path_val = get("PATH");
    // TODO: Check if empty when string comparison available
    
    return 0;
}

fn main(): i32 {
    println("=== Environment Module Test ===");
    
    // Test 1: Basic operations
    let result1 = test_basic_env_operations();
    if result1 != 0 {
        println("FAIL: test_basic_env_operations");
        return result1;
    }
    println("✓ Basic env operations working");
    
    // Test 2: System environment variables
    let result2 = test_system_env_vars();
    if result2 != 0 {
        println("FAIL: test_system_env_vars");
        return result2;
    }
    println("✓ System env vars accessible");
    
    println("✓ Env module fully working");
    return 0;
}
