// Vex Testing Framework - Simplified pure Vex implementation
// Version 0.1.2

// ============================================================================
// Test Context - Simple struct for test state
// ============================================================================

export struct TestContext {
    name: String,
    failed: bool,
    skipped: bool,
}

// Report test failure
export fn (self: &TestContext!) report_error(msg: String) {
    self.failed = true;
    print("[FAIL] ");
    print(self.name);
    print(": ");
    println(msg);
}

// Skip test with reason
export fn (self: &TestContext!) skip(msg: String) {
    self.skipped = true;
    print("[SKIP] ");
    print(self.name);
    print(": ");
    println(msg);
}

// Log message
export fn (self: &TestContext) log(msg: String) {
    print("[LOG] ");
    println(msg);
}

// Check if test failed
export fn (self: &TestContext) is_failed(): bool {
    return self.failed;
}

// ============================================================================
// Helper Functions - Test runners
// ============================================================================

// Run a test function
export fn run_test(name: String): TestContext {
    let t = TestContext {
        name: name,
        failed: false,
        skipped: false,
    };
    
    return t;
}

// Mark test as passed
export fn pass_test(name: String) {
    print("[PASS] ");
    println(name);
}

// Mark test as failed
export fn fail_test(name: String, msg: String) {
    print("[FAIL] ");
    print(name);
    print(": ");
    println(msg);
}
